--- 
site: bookdown::bookdown_site
documentclass: book
classoption: openany
toc: FALSE
---

```{=latex}
% Trigger ToC creation in LaTeX
\renewcommand{\baselinestretch}{0.7}\normalsize
\tableofcontents
\renewcommand{\baselinestretch}{2}\normalsize
```

```{r, echo=FALSE}
knitr::opts_chunk$set(fig.width=4, fig.height=4, fig.align = 'center')
```

# Section 1: R Commands

You are not expected to have all of these commands memorized, but you are expected to be able to know where to look. This chapter is a reference guide on how to do various tasks in R that we will encounter throughout the semester. This is not an exhaustive list, and does not supplement the online course notes for this chapter. 

A Base R cheat sheet will be handed out in the first week. Insert this page into your course notes after this chapter. 

\vspace{-1cm}

\singlespace
## Basics

Basic Math
```{r}
3*pi^2 + 4*(3-log(5))^2
```

Combinatorics
```{r}
factorial(5) # 5! = 5*4*3*2*!
choose(5,3) # 5 choose 3
```

Store a value into an object using the assignment operator `<-`
```{r}
height <- 62
```

Print the result of a line of code
```{r}
(height <- 62)
```

Do math on objects
```{r}
apples <- 5
oranges <- 4
(fruit <- apples + oranges)
```

## Vectors

Combine multiple numbers into a single vector object using the `c` operator.
```{r}
(primes <- c(2,3,5,7,11,13,17,19,23,29))
```

Vector of the numbers 1 through 10
```{r}
(first.ten <- 1:10)
```

`seq(a, b, by=x)`: Create a sequence of numbers from `a`, to `b`, counting by `x`.
```{r}
(odds <- seq(1, 10, by=2))
```

`rep`: Repeat a sequence of numbers in varying patterns. See `? rep` for more info on the options.
```{r}
rep(c(2,3), times=c(4,3))
rep(c(2,3), each=2)
rep(c(2, 3), length.out = 3)
```

Character vectors
```{r}
(letterz <- c("A", "b", "C", "d"))
```

### Indexing vectors
Extract values from a specific position in a vector.

Returns first and second number from `primes` and `letterz`
```{r}
primes[1]
letterz[2]
```

Returns first three numbers of a vector
```{r}
primes[1:3]
```

### Operations on vectors

Element wise math operations
```{r}
primes * first.ten # multiplication
primes - first.ten # subtraction
abs(primes - first.ten) # absolute value
pmin(primes, first.ten) # minimum value between each pairwise element. Also `pmax`
```

Functions that apply to the entire vector
```{r}
sum(primes) # add up all values in the vector
mean(primes) # average value in the vector
min(primes) # min value within the vector. Also `max`
```

Functions that tell you characteristics about the vector
```{r}
(a <- rep(c(2,3), times=c(4,3)))
length(a) # how many elements are in the vector
unique(a) # which elements are unique? (remove duplicates)
```

\newpage 

## Boolean Operators
The standard comparison operators that will return either `TRUE` or `FALSE` are `=`, `!=`, `>`, `<`, `>=`, and `<=`. 

Change a vector to TRUE and FALSE by writing a logical statement. 
```{r}
primes>6
```

Identify the numbers in primes that are greater than 6
```{r}
primes[primes>6]
```

Check if a value is contained inside a vector is using the `%in%` operator. 
```{r}
4 %in% primes
```

### AND and OR

Is 9 an odd prime? 
```{r}
(9 %in% odds) & (9 %in% primes)
```

Is 9 an odd or a prime? 
```{r}
(9 %in% odds) | (9 %in% primes)
```

### Math on Boolean values
In the programming world, Boolean values resolve as 0 for FALSE and 1 for TRUE. This means we can do math on Boolean vectors. E.g. If we use the command `sum` then R automatically turns the vector into a numeric vector of 0s and 1s and then calculates the sum of the vector, which corresponds to the number of 1's. 

The arithmetic average is calculated as $\frac{\sum(x)}{n}$. If $x$ is a binary 0/1 data type, then the average is equivalent to the proportion of 1s.


Count the number of primes greater than 6
```{r}
sum(primes>6)
```

What proportion of primes are greater than 5?
```{r}
mean(primes>5)
```

\newpage

## Frequency and Proportion tables 

Frequency table
```{r}
get.numbers <- sample(1:10, 1000, replace=TRUE) # generate fake data
table(get.numbers) # create the table
```

Proportions
```{r}
proportions(table(get.numbers))
```


## Plots

Discrete probability distribution: plot the table of proportions.
```{r}
plot(proportions(table(get.numbers)))
```

\newpage

Continuous probability distributions: we can plot functions directly, or create histograms and density curves from simulated values. 

- Direct plotting of known functions
```{r}
x <- seq(0,1, by=0.01) # create values in the domain
y <- 4*x^{3} # pdf
plot(x,y, type = 'l') # the lower case 'l' draws a line
```

- simulating distributions
```{r}
x <- rnorm(1000) # draw 1000 values from a standard normal distribution
hist(x, nclass=30) # create a frequency histogram with 30 bins
```

- Adding a known distributional curve over a histogram. Need to use `prob=TRUE` to change the y axis to a density so it's on the same scale as the curve. 
```{r}
hist(x, nclass=30, prob=TRUE) 
curve(dnorm(x), add=TRUE, col="red") # note, this always stays x
```



## Integration
To do finite integration you first define a function: 
```{r}
myfun <- function(x){x+5}
```

Then pass it to the `integrate` function. 
```{r}
(myint <- integrate(myfun, lower=0, upper=3))
```

The result of this integration can be accessed using `$value`
```{r}
myint$value
```

\newpage

## Simulation

Draw 10 samples from the numbers 1,2 or 3 with replacement. 
```{r}
sample(c(1,2,3), 10, replace=TRUE)
```

Conduct an experiment multiple times. Only the object last referenced will be saved out. E.g., `x` is not retained, only the value of `mean(x)`. 
```{r}
replicate(5, {
  x <- sample(c(1,2,3), 10, replace=TRUE)
  mean(x)
})
```

\doublespace
